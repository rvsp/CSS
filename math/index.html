<!DOCTYPE HTML>
<html lang="en-us">

<head>
  <meta charset="utf-8" />
  <title>Math and Variables</title>
  <link rel="stylesheet" href="../intro/css/main.css" />
  <style>
    style {
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <!-- Top instructions -->
  <div id="topinfo"></div>
  <!-- footer instructions -->
  <div id="info">
  </div>

  <div id="presentation">
    <div id="presentation-counter"></div>
    <div id="slides">

      <div class="slide intro">
        <header>
          <h1>CSS Math &amp; Variables</h1>
        </header>
        <section class="content">
          <h1>CSS Custom Properties and Math in property values</h1>
          <p><a href="https://rvsp.github.io/CSS/fonts/">rvsp.github.io/CSS/math/</a></p>
        </section>
      </div>


      <div class="slide intro">
        <header>
          <h1>CSS Math &amp; Variables</h1>
        </header>
        <section class="content">
          <ul>
            <li>CSS Custom Properities</li>
            <ul>
              <li>Creating custom properties <code>--*</code></li>
              <li>Using custom properties <code>var(--*)</a></code> function</li>
            </ul>
            </li>

            <li>Evironmental Variables
              <ul>
                <li><code>env()</a></code> function</li>
              </ul>
            </li>
            <li>Math
              <ul>
                <li>calc()</li>
                <li>min(), max(), clamp()</li>
                <li>Other "math" functions</li>
              </ul>
            </li>
          </ul>
        </section>
      </div>

      <div class="slide intro">
        <header>
          <h1>CSS Custom Properties</h1>
        </header>
        <section class="content">
        </section>
      </div>


      <div class="slide intro">
        <header>
          <h1>Custom properties with <code>--*</code></h1>
        </header>
        <section class="content">

        </section>
      </div>


      <div class="slide">
        <header>
          <h1><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/--*" target="resource">Custom properties
              (--*)</a>: CSS variables</h1>
        </header>
        <section class="content">
          <p>Property names that are prefixed with <code class="pre">--</code> are custom properties</p>
          <p>They contain a value that can be used in other declarations using the <code>var()</code> function.</p>
          <style class="editme" contenteditable>
            :root {
              --font: Book Antiqua, Georgia, serif;
              --splashcolor: #880088;
              --lightsplash: #cc33cc;
              --dark_bg: #666;
              --colorpop: #880088;
            }
          </style>
          <ul>
            <li>The above are the the custom properties for this part of the slide deck.</li>
            <li>Update the colors above to change the slide deck.</li>
          </ul>

        </section>
      </div>


      <div class="slide">
        <header>
          <h1>Global property values</h1>
        </header>
        <section class="content">
          <p>Custom properties are scoped to the element(s) they are declared on, and participate in the cascade. The
            <code>main.css</code> file has global colors.</p>
          <style class="editme" contenteditable>
            :root {
              X--font: Book Antiqua, Georgia, serif;
              X--splashcolor: #646405;
              --text: #333333;
              --textsecondary: #4d4d4d;
              --invertedtext: #ffffff;
              --header_bg: #ffffff;
              --light_bg: #f4f4f4;
              X--dark_bg: #800420;
              X--colorpop: #646405;
              --alert: #cc0000;
            }
          </style>
          <p>The five custom properties on the previous slide, <code>--font, --dark_bg, --colorpop</code>, and
            <code>--lightsplash</code> have been overwritten for this deck, thanks to "the cascade"</p>
        </section>
      </div>




      <div class="slide">
        <header>
          <h1>Scoped property values</h1>
        </header>
        <section class="content">
          <p>Custom properties are scoped to the elements they are declared on. What happen if we scope more locally and
            change the values of some properties?</p>
          <style class="editme" contenteditable>
            figure {
              --font: Book Antiqua, Georgia, serif;
              --splashcolor: #646405;
              --text: #333333;
              --invertedtext: #ffffff;
              --header_bg: #ffffff;
              --light_bg: #f4f4f4;
              --dark_bg: #800420;
              --colorpop: #646405;
            }
          </style>
          <p>Change the <code>figure</code> to <code>header</code> and change some values</p>
          <p>Remove a line. If no value is set for a custom property on a given element, the value of its parent is
            used.</p>
        </section>
      </div>



      <div class="slide intro">
        <header>
          <h1>The
            <code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/var" target="resource">var(--*)</a></code>
            function</h1>
        </header>
        <section class="content">

        </section>
      </div>


      <div class="slide">
        <header>
          <h1>Using Custom Properties</h1>
        </header>
        <section class="content">
          <p>Custom properties containing values are used in declarations using the <code>var()</code> function. Note
            property names are case sensitive</p>
          <style class="editme" contenteditable>
            [id="presentation"] {
              background-color: var(--dark_bg);
            }

            .slide {
              background-color: var(--light_bg);
            }

            .slide header h1 {
              color: var(--splashcolor);
              font-family: var(--font);
            }

            nav button {
              color: var(--invertedtext);
              background-color: var(--colorpop);
            }

            a,
            em {
              color: var(--splashcolor);
            }
          </style>
        </section>
      </div>






      <div class="slide">
        <header>
          <h1>Using Custom Properties</h1>
        </header>
        <section class="content">
          <p>The <code>var()</code> function can be used as a value in other functions</p>
          <style class="editme" contenteditable>
            #next {
              background: radial-gradient(ellipse at 100% 20%,
                  var(--colorpop) 48%,
                  transparent 48%);
            }

            #next:hover,
            #next:focus {
              background: radial-gradient(ellipse at 100% 20%,
                  var(--colorpop) 48%,
                  var(--invertedtext) 48% 52%,
                  var(--dark_bg) 52% 54%,
                  transparent 54%);
            }

            #back {
              background: radial-gradient(ellipse at 0% 20%,
                  var(--colorpop) 48%, transparent 48%);
            }

            #back:hover,
            #back:focus {
              background: radial-gradient(ellipse at 0% 20%,
                  var(--colorpop) 48%,
                  var(--invertedtext) 48% 52%,
                  var(--dark_bg) 52% 54%,
                  transparent 54%);
            }
            }
          </style>
        </section>
      </div>



      <div class="slide">
        <header>
          <h1>Using Custom Properties</h1>
        </header>
        <section class="content">
          <p>Internationalization</p>
          <pre contenteditable>:root:lang(en-us) {--wedding: #FFFFFF;}
:root:lang(hi-in) {--wedding: #CC0000;}</pre>
          <p>So you don't get bored staring at the same deck all day:
          <pre contenteditable>:root { --splashcolor: #880088;
        --dark_bg: #666666; }</pre>
        </section>
      </div>


      <div class="slide">
        <header>
          <h1>Fallbacks for Custom properties</h1>
        </header>
        <section class="content">
          <p>OOoops, you thought you declared a custom property, but you didn't. No worries. Include fall backs.</p>

          <ol>
            <li><code>color</code> will be red because <code>colorpop</code> was misspelled.
              <pre contenteditable>color: var(--colorpoop, red);</pre>
            </li>
            <li><code>background-color</code> will be green because custom property names are case sensitive
              <pre contenteditable>background-color: var(--colorpoop, var(--splashColor, green));</pre>
            </li>
            <li><code>text-decoration-color</code> will be blue because '<code>--colorpop, --splashcolor</code>' is not
              a valid custom property name.
              <pre contenteditable>text-decoration-color: var(--colorpop, --splashcolor, blue);</pre>
            </li>
          </ol>
        </section>
      </div>


      <div class="slide">
        <header>
          <h1>Invalid values</h1>
        </header>
        <section class="content">
          <p>Paragraph will be blue</p>
          <pre contenteditable>body { color: red; } 
p { color: blue; } 
p { color: 16px; }</pre>

          <p>Syntax errors are ignored.</p>
        </section>
      </div>



      <div class="slide">
        <header>
          <h1>Invalid values</h1>
        </header>
        <section class="content">
          <p>Paragraph will be red</p>
          <pre contenteditable>:root {--size: 16px;}
body { color: red; } 
p { color: blue; } 
p { color: var(--size); }</pre>
        </section>
        <p>Invalid: custom property values that are invalid are not ignored. Value, if inheritable, is inherited</p>
        </section>
      </div>


      <div class="slide">
        <header>
          <h1>Invalid values</h1>
        </header>
        <section class="content">
          <p>Paragraph will be red</p>
          <pre contenteditable>:root {--size: 16px;}
body { color: red; } 
p { color: blue; } 
p { color: var(--pooperscooper); }</pre>
        </section>
        <p>If the value doesn't exist, it is invalid, and fails too. Not just invalid values, but non-existant
          properties.</p>
        <p>SpecSpeak: Value computation (where variable references are resolved) happens after applying the cascade,
          which means that the `color: blue` declaration was already eliminated in favor of the variable reference.</p>
        </section>
      </div>


      <div class="slide object">
        <header>
          <h1>Invalid custom properties</h1>
        </header>
        <object data="exercises/invalid.html"></object>
        <a href="exercises/invalid.html" target="play" class="objectlink">Open</a>
      </div>


      <div class="slide">
        <header>
          <h1>Invalid variables</h1>
        </header>
        <section class="content">
          <p>When the browser encounters an invalid var() substitution, the initial or inherited value of the property
            is used.</p>
          <p>If a variable substitution doesn’t make any sense, the browser:
          <ol>
            <li>Checks if the property color is inheritable.
            </li>
            <li>If not, it sets the value to its default initial value.</li>
          </ol>


          <p>While a syntax error in a CSS property / value pair will lead to the line being ignored, using a cascaded
            value, invalid substitution -- using a custom property value that is invalid -- is not ignored.</p>
          <p>Variable references are resolved after applying the cascade, so a valid declaration may have been
            eliminated in favor of a variable reference without checking validity of that reference.</p>

        </section>
      </div>


      <div class="slide">
        <header>
          <h1>Custom Properties and JavaScript</h1>
        </header>
        <section class="content">
          <p>you can get the value just like you would any property value</p>
          <pre contenteditable>// get a variable
let heading = document.querySelector('.current header h1');

let headingColor = 
   getComputedStyle( heading ).getPropertyValue( "--colorpop" );</pre>
          <p>Can be used to pass information to JavaScript</p>
          <pre contenteditable>--forJS: if(count > 15) this.width = 100;</pre>
          <p>You can also use .style to read or write on an inline style, but since inline styles are not what I
            recommend, 😝</p>
        </section>
      </div>




      <div class="slide intro">
        <header onclick="">
          <h1>
            <code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/all" target="resource" oncl>env()</a></code>
            function</h1>
        </header>
      </div>


      <div class="slide object">
        <header onclick="">
          <h1>
            <code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/all" target="resource" oncl>env()</a></code>
            function</h1>
        </header>
        <object data="https://webkit.org/blog/7929/designing-websites-for-iphone-x/"></object>
        <a href="https://webkit.org/blog/7929/designing-websites-for-iphone-x/" target="play" class="objectlink">iPhone
          example</a>
      </div>

      <div class="slide">
        <header onclick="">
          <h1>
            <code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/all" target="resource" oncl>env()</a></code>
            function</h1>
        </header>
        <section>
          <img src="img/env.png" alt="three iphone layouts demonstrating use of env() function"
            style="height: 80vh; float: left; margin-right: 2em;">
          <p>For inserting browser environment variable values</p>
          <pre contenteditable style="float: left">body {
  padding:
    env(safe-area-inset-top, 20px)
    env(safe-area-inset-right, 20px)
    env(safe-area-inset-bottom, 20px)
    env(safe-area-inset-left, 20px);
}</pre>
        </section>
      </div>




      <div class="slide intro">
        <header>
          <h1>Math</h1>
        </header>
        <section class="content">
        </section>
      </div>


      <div class="slide intro">
        <header>
          <h1><code>calc()</code></h1>
        </header>
        <section class="content">
        </section>
      </div>

      <div class="slide">
        <header>
          <h1><code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/calc" target="resource">calc()</a></code>
            syntax</h1>
        </header>
        <section class="content">
          <p>To perform calculations anywhere a
            <code>&lt;length&gt;, &lt;frequency&gt;, &lt;angle&gt;, &lt;time&gt;, &lt;percentage&gt;, &lt;number&gt;</code>,
            or <code>&lt;integer&gt;</code> value is allowed.</p>
          <pre contenteditable>property: calc(expression)</pre>
          <p>Example:</p>
          <pre contenteditable>height: calc(90vh - 100px);</pre>
          <section class="content">
          </section>
      </div>

      <div class="slide">
        <header>
          <h1><code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/calc" target="resource">calc()</a></code>
            computations</h1>
        </header>
        <section class="content">
          <p>Use standard math:</p>
          <pre contenteditable> calc( 6 * 2 / 3 - 4 + 5);</pre>
          <p>Use parenthese to make it less confusing</p>
          <pre contenteditable> calc( 6 * (2 / 3 ) - (4 + 5));</pre>
        </section>
      </div>

      <div class="slide">
        <header>
          <h1><code>calc()</code> rules</h1>
        </header>
        <section class="content">
          <ul>
            <li>Operands can be any <code>&lt;length></code> syntax value, with or without units.</li>
            <li>Mixing different units is AOK</li>
            <li>Nesting a <code>calc()</code> in a <code>calc()</code> is also AOK</li>
            <li><code>calc()</code> inside a custom property is, you guessed it, AOK.</li>
            <li>Use parentheses to establish computation order &amp; for code legibility.</li>
            <li>Surround operands with whitespace. Is "-" a minus or a negative number?</li>
            <li>Don't divide by zero or a non-number</li>
            <li>% for width and heights on some elements may be auto, so may lead to odd results</li>
          </ul>
        </section>
      </div>


      <div class="slide">
        <header>
          <h1><code>calc()</code> examples</h1>
        </header>
        <section class="content">
          <pre contenteditable>:root {
  --widthA: calc(100% - 80px);
  --widthB: calc(var(--widthA) / 2);
  --widthC: calc(var(--widthB) / 2);
}
</pre>
        </section>
      </div>

      <div class="slide">
        <header>
          <h1><strike><code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/min" target="resource">min()</a></code>,
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/max" target="resource">max()</a></code>
              and
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/clamp" target="resource">clamp()</a></code></strike>
          </h1>
        </header>
        <section class="content">
          <p>Can be used anywhere a
            <code>&lt;length&gt;, &lt;frequency&gt;, &lt;angle&gt;, &lt;time&gt;, &lt;percentage&gt;, &lt;number&gt;</code>,
            or <code>&lt;integer&gt;</code> is allowed.</p>
          <h3><code>min()</code> - only works in Safari</h3>
          <p>Sets the smallest (most negative) value from a list of comma-separated expressions.</p>

          <h3><code>max()</code> - only works in Safari</h3>
          <p>Sets the largest (most positive) value from a list of comma-separated expressions.</p>

          <h3><code>clamp()</code> - doesn't work anywhere</h3>
          <p>Clamps a value between an upper and lower bound: a middle value within a range of values between a defined
            minimum and maximum</p>
        </section>
      </div>

      <div class="slide">
        <header>
          <h1>When supported</h1>
        </header>
        <section class="content">
          <pre contenteditable>font-size: max(4vw, 2em, 2rem);</pre>
          <pre contenteditable>max-height: min(40vh, 300px);</pre>
        </section>
      </div>

      <div class="slide">
        <header>
          <h1><code>clamp()</code> - for the future</h1>
        </header>
        <section class="content">
          <pre>clamp( &lt;minimum value>, &lt;preferred value>, &lt;maximum value>)</pre>
          <p>Those three values can be calculations, min() functions and max() functions as well</p>
          <p>
          <pre style="display: inline">clamp(MIN, VAL, MAX)</pre> is resolved as
          <pre style="display: inline">max(MIN, min(VAL, MAX))</pre>
          </p>
          <p>Examples:
          <pre contenteditable>font-size: clamp(1rem, 4vw, 3rem);
font-size: 
  clamp(var(--smallFont), var(--userPref), var(--largeFont));</pre>
        </section>
      </div>

      <div class="slide">
        <header>
          <h1>Other Math!</h1>
        </header>
        <section class="content">
          <p>Trigonometric and exponential values</p>
          <pre contenteditable>
sin() 
cos()
tan()
asin()
acos()
atan()
atan2()
pow()
sqrt() 
hypot()</section>
</div>


<div class="slide">
<header><h1>Useful Math!</h1>
  </header>
<section class="content">
  <p>Responsive font equation</p>
<pre contenteditable>font-size: 
  calc( var(--min_font) + 
  (var(--max_font) - var(--min_font)) * ( (100vw - var(--min_width)) / 
  ( var(--max_width) - var(--min_width)) ));</pre>
        </section>
      </div>


      <!--NEXT-->
      <div class="slide divider">
        <header>
          <h1>Fonts</h1>
        </header>
        <h1><a href="../fonts">Next ➹</a></h1>
      </div>

      <div class="slide dots">
        <header>
          <h1>Table of Content</h1>
        </header>
        <section>
          <ol class="col2">
            <li><a href="../intro/index.html">Introduction</a></li>
            <li><a href="../selectors/index.html">Selectors</a></li>
            <li><a href="../selectors/specificity.html">Specificity</a></li>
            <li><a href="../generated/index.html">Generated Content</a></li>
            <li><a href="../media/index.html">Media Queries</a></li>
            <li><a href="../values/index.html">Units &amp; Values </a></li>
            <li><a href="../colors/index.html">Colors &amp; Transparency </a></li>
            <li><a href="../math/index.html">Math &amp; Variables</a></li>
            <li><a href="../fonts/index.html">Fonts</a></li>
            <li><a href="../text/index.html">Text</a></li>
            <li><a href="../images/index.html">Images</a></li>
            <li><a href="../background/index.html">Backgrounds</a></li>
            <li><a href="../gradients/index.html">Gradients</a></li>
            <li><a href="../boxmodel/index.html">Box Model</a></li>
            <li><a href="../flexbox/index.html">Flexbox</a></li>
            <li><a href="../tables/index.html">Tables</a></li>
            <li><a href="../grid/index.html">Grids</a></li>
            <li><a href="../transforms/index.html">Transforms</a></li>
            <li><a href="../animations/index.html">Transitions &amp; Animation</a></li>
            <li><a href="../other/index.html">Other Features</a></li>

            <p>
          </ol>
        </section>
      </div>
      <!-- TOC -->
      <div class="slide">
        <header>
          <h1>Links</h1>
        </header>
        <section class="content">
          <ul>
            <li><a href="https://drafts.csswg.org/css-variables/">CSS Variables Module Level&nbsp;1</a></li>

            <li><a href="https://drafts.csswg.org/css-text-decor-3/">CSS Text Decoration Module Level&nbsp;3</a></li>
            <li><a href="https://drafts.csswg.org/css-fonts-3/"
                title="The 'CSS Fonts Module Level&nbsp;3' specification">CSS Fonts Module Level&nbsp;3</a></li>

            <li><a href="https://drafts.csswg.org/css-text-4/">CSS Text Module Level 4</a></li>
            <li><a href="https://drafts.csswg.org/css-text-3/">CSS Text Module Level 3</a></li>
            <li><a href="https://www.w3.org/TR/CSS1/" title="The 'CSS Level&nbsp;1' specification">CSS Level&nbsp;1</a>
            </li>
          </ul>
        </section>
      </div>

      <div class="slide divider">
        <header>
          <h1><code></code></h1>
        </header>
        <section class="content">
        </section>
      </div>

    </div>


  </div>
  <header>
    <nav>
      <ul>
        <li><button class="button cancel" id="back">&laquo; Back</button></li>
        <li><button class="button done" id="next">Next &raquo; </button></li>
      </ul>
    </nav>
  </header>
  <script src="../slideshow.js"></script>
</body>

</html>